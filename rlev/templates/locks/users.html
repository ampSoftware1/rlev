{% load custom_filters %}
<div class="sticky-top p-3 bg-white border-bottom" style="z-index: 1000">
    <div class="">
        <div class="row">
            <div class="col-6">
                <span class="fs-4 fw-bold ">משתמשים</span>
            </div>

            <div class="col-6 text-end">
                <span class="fs-4">
                    <i class="bi bi-person-plus mx-1 cursor-pointer" data-toggle="tooltip" title="הוסף משתמש"
                        id="add_user"></i>
                </span>
            </div>
        </div>
    </div>
</div>


<div id="users_container" class="p-3">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th scope="col">שם משתמש</th>
                <th scope="col">שם פרטי</th>
                <th scope="col">שם משפחה</th>
                <th scope="col">דואר אלקטרוני</th>
                <th scope="col">הרשאות ניהול</th>
                <th scope="col">כניסה אחרונה</th>
            </tr>
        </thead>
        <tbody id="users_table" class="cursor-pointer">
            {% for user in users %}
            <tr class="user_row" data-id="{{ user.user_id }}">
                <td>{{ user.username }}</td>
                <td>{{ user.first_name }}</td>
                <td>{{ user.last_name }}</td>
                <td>{{ user.email }}</td>
                <td class="text-center">
                    {% if user.is_superuser %}
                    <i class="bi bi-check-lg text-success"></i>
                    {% else %}
                    <i class="bi bi-x-lg text-danger"></i>
                    {% endif %}
                </td>
                <td>{{ user.last_login }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>
<script>
    var csrfToken = "{{ csrf_token }}";


    $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
        $('#add_user').click(function () {
            loadContent('#md-modal-content', 'add_user');
            $('#modal-md').modal('show');
        });
        $(".user_row").click(function () {
            var id = $(this).data("id");
            loadContent('#md-modal-content', 'user/' + id);
            $('#modal-md').modal('show');
        });
    });

    
</script>